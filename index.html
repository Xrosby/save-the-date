<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Save the Date</title>
    <!-- Include Oridomi library -->
    <script src="https://oridomi.com/oridomi.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <script src="dynamics.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Afacad:wght@400;500;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">


</head>

<body>
    <div id="container">
        <div id="card">

            <div id="stars" class="stars"></div>


            <div style="position:fixed;bottom:-30vh; width:100vw;height:80vh;" id="sunset-container"></div>
            <div style="position:fixed;bottom:-30vh;left:10vw; width:80vw;height:80vh;" id="sunset-container2"></div>

            <div id="save-the-date-container" style="display:flex">
                <h1 class="text" id="save-header-save">SAVE</h1>
                <h1 class="text" id="save-header-the">the</h1>
                <h1 class="text" id="save-header-date">DATE</h1>
            </div>
            <div id="balloon">
                <img style="height:100%;width:100%;" src="hot-air-balloon-21225.png" />
            </div>
            <div id="cloud1" style="height: 3rem; width: 5rem">
                <img style="height:100%;width:100%;" src="cloud.png" />
            </div>
            <div id="cloud2" style="height:4rem; width: 6rem">
                <img style="height:100%;width:100%;" src="cloud.png" />
            </div>
            <div id="cloud3" style="height:6rem; width: 8rem">
                <img style="height:100%;width:100%;" src="cloud.png" />
            </div>

            <div>
                <div id="date">
                    <span class="text number" id="number-1"
                        style="z-index: 105; padding-top:4rem;padding-bottom:5px">17</span>

                    <span class="text number"
                        style="z-index: 105;border-bottom:1px solid black; border-top:1px solid black; margin-bottom: 10px; padding-top:10px">08</span>

                    <span class="text number" style="z-index: 105;">24</span>

                </div>
                <div id="names" style="display:flex">
                    <span class="text" style="z-index: 105;">Mads</span>
                    <div class="ring-container">
                        <div style="z-index: 105;" class="ring"></div>
                        <div style="z-index: 105;" class="ring2"></div>
                    </div>
                    <span class="text" style="z-index: 105;">Nica</span>
                </div>

            </div>
            <div id="formal-invitation">
                <span class="text" style="z-index: 105;">Castello di San Basilio, Pisticci</span>
                <span class="text" id="message" style="z-index: 105;margin-top:1rem">Formal invitation to follow</span>
                <!--<span class="text" id="message" style="z-index: 105;">Official invitation f√∏lger</span>-->
            </div>

            <div id="hills">
                <img style="height:100%; width:100%" src="ocean3.png" />
            </div>

        </div>

    </div>




    <script>

        //setDynamicElements()
        //setInterval(setDynamicElements, 1000)


        function floatAnimation(top) {
            let tipped = false;

            const bobbingAmplitude = 50;
            // Animate the balloon's top and left properties with a bobbing effect
            $('#balloon').animate({
                top: top,
                left: window.innerWidth - 100
            }, {
                duration: 20000,
                easing: 'swing',
                step: function (now, fx) {
                    if (fx.prop === 'top') {
                        $(this).css('top', top + bobbingAmplitude * Math.sin(now / 100));
                    } else {
                        $(this).css('bottom', top + bobbingAmplitude * Math.sin(now / 100));
                    }
                },
                complete: function () {
                    $('#balloon').animate({
                        left: 0,
                        top: top + 50,
                    }, {
                        duration: 20000,
                        easing: 'swing',
                        step: function (now, fx) {
                            if (fx.prop === 'top') {
                                $(this).css('top', top + bobbingAmplitude * Math.sin(now / 100));
                            } else {
                                $(this).css('bottom', top + bobbingAmplitude * Math.sin(now / 100));
                            }
                        },
                        complete: () => floatAnimation(top + 50)
                    });
                }
            });

        }

        /*

          const balloon = $('#balloon') //.position();
                    const firstNumber = $('#number-1')

                    function isColliding($element1, $element2) {
                        // Get positions and dimensions of the elements
                        var rect1 = $element1[0].getBoundingClientRect();
                        var rect2 = $element2[0].getBoundingClientRect();

                        return (
                            rect1.x < rect2.x + rect2.width &&
                            rect1.x + rect1.width - 35 > rect2.x &&
                            rect1.y < rect2.y + rect2.height &&
                            rect1.y + rect1.height > rect2.y
                        );
                    }
        */

        // Start the animation with an initial top value of 100
        floatAnimation(100);



        async function getCountry() {
            let country = 'italy';
            try {
                const response = await fetch('http://api.ipstack.com/check?access_key=aff86d7313e111cac1330a4236d5e53e');
                const data = await response.json();
                //alert(data.country_name)
                country = (data?.country_name || 'Italy').toLowerCase()
            } catch (error) {
                //alert('Error fetching data from ipstack API:' + JSON.stringify(error))
                console.error('Error fetching data from ipstack API:', error);
            }

            return country;
        }

        const setFormalMessage = () => {
            const country = getCountry().then((country) => {
                const danishMessage = 'Official invitation foelger'
                const italianMessage = 'Seguira\' invito ufficiale'

                const message = country === 'denmark' ? danishMessage : italianMessage;

                const formalMessageContainer = document.getElementById("message");
                formalMessageContainer.innerText = message;
            })
        }

        //setFormalMessage()

    </script>
</body>

</html>